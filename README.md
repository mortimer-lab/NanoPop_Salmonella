# NanoPop_Salmonella
Snakemake pipeline for automated estimation of Salmonella serovar frequencies within a mixed population using analysis of amplicon sequencing of fimH and sseL with Nanopore

## Pipeline Requirements
This pipeline requires conda for software installation and Snakemake. If you are running this pipeline on Sapelo2 or another cluster with slurm, you also need the snakemake executor plugin for slurm.

### Installing snakemake
1. Install conda or mamba. We recommend [miniforge](https://conda-forge.org/download/).
2. Install [Snakemake](https://snakemake.readthedocs.io/en/stable/getting_started/installation.html).

#### Required only if you are using slurm:

3. Install [Snakemake executor plugin: slurm](https://snakemake.github.io/snakemake-plugin-catalog/plugins/executor/slurm.html) in your snakemake conda environment.

## Pipeline Components

### envs
YAML files describing conda environments required for this pipeline

### config
Configuration files specific to your analysis. Template files have been included in this directory.

### rules
Snakemake files describing rules for pipeline components

### scripts
Custom python and R scripts for data analysis.

### Snakefile
Main Snakefile that imports rules and defines desired output. The only output that is generated by default are de novo assemblies and annotations. Uncomment other desired output.

## Running the pipeline

1. Clone this repository.
2. Update `config/config.yaml` and `config/samples.tsv` with information specific to your dataset.
3. Make sure all desired output is listed under `rule all:` in Snakefile
4. Run snakemake using `snakemake`. If you would like to run on a cluster using slurm, specify the profile: `snakemake --workflow-profile profiles/slurm`.

